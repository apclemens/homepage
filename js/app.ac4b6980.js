(function(e){function t(t){for(var s,a,r=t[0],c=t[1],l=t[2],h=0,g=[];h<r.length;h++)a=r[h],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&g.push(n[a][0]),n[a]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);d&&d(t);while(g.length)g.shift()();return o.push.apply(o,l||[]),i()}function i(){for(var e,t=0;t<o.length;t++){for(var i=o[t],s=!0,r=1;r<i.length;r++){var c=i[r];0!==n[c]&&(s=!1)}s&&(o.splice(t--,1),e=a(a.s=i[0]))}return e}var s={},n={app:0},o=[];function a(t){if(s[t])return s[t].exports;var i=s[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=e,a.c=s,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)a.d(i,s,function(t){return e[t]}.bind(null,s));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var d=c;o.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},5404:function(e,t,i){"use strict";var s=i("76a4"),n=i.n(s);n.a},"56d7":function(e,t,i){"use strict";i.r(t);i("cadf"),i("551c"),i("f751"),i("097d");var s=i("2b0e"),n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("div",{attrs:{id:"canvas"},on:{mousedown:e.mouseDown,mousemove:e.mouseMove,mouseup:e.mouseUp}},[e._l(e.widgets,(function(t,s){return i("Widget",{key:s,attrs:{x:t.box[0],y:t.box[1],a:t.box[2],b:t.box[3],type:t.type,data:t.data,editing:e.editing},on:{resize:function(t){return e.resizeWidget(t,s)},deleteWidget:function(t){return e.deleteWidget(t,s)},editWidget:function(t){return e.editWidget(t,s)},changeHTML:function(t){return e.changeHTML(t,s)},moveWidget:function(t){return e.moveWidget(t,s)}}})})),e.creating_corner_1[0]>-1?i("Widget",{attrs:{x:Math.min(e.creating_corner_1[0],e.creating_corner_2[0]),y:Math.min(e.creating_corner_1[1],e.creating_corner_2[1]),a:Math.max(e.creating_corner_1[0],e.creating_corner_2[0]),b:Math.max(e.creating_corner_1[1],e.creating_corner_2[1]),editing:!0}}):e._e(),i("Toolbox",{directives:[{name:"show",rawName:"v-show",value:e.editing,expression:"editing"}],attrs:{selectedButton:e.creating},on:{createWidget:e.createWidget}})],2),i("label",{attrs:{id:"edit-switch"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.editing,expression:"editing"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.editing)?e._i(e.editing,null)>-1:e.editing},on:{change:function(t){var i=e.editing,s=t.target,n=!!s.checked;if(Array.isArray(i)){var o=null,a=e._i(i,o);s.checked?a<0&&(e.editing=i.concat([o])):a>-1&&(e.editing=i.slice(0,a).concat(i.slice(a+1)))}else e.editing=n}}}),i("span",{staticClass:"slider round"}),e.editing?i("span",{staticClass:"text"},[e._v("Editing")]):i("span",{staticClass:"text"},[e._v("Viewing")])])])},o=[],a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{style:{left:e.left+"px",top:e.top+"px"},attrs:{id:"toolbox"}},[i("div",{class:{moving:e.moving},attrs:{id:"move-bar"},on:{mousedown:e.mouseDownMove,mouseup:e.mouseUpMove,mousemove:e.mouseMoveMove,mouseleave:e.mouseUpMove}}),e._l(e.buttons,(function(t){return i("div",{key:t,class:"widget-selector"+(e.selectedButton==t?" selected":""),style:{backgroundImage:"url("+t+".png)"},attrs:{id:t},on:{click:e.emitCreate}})}))],2)},r=[],c={name:"Toolbox",data:function(){return{moving:!1,left:this.$cookies.isKey("toolbar-left")?this.$cookies.get("toolbar-left"):100,top:this.$cookies.isKey("toolbar-top")?this.$cookies.get("toolbar-top"):100,selectLeft:-1,selectTop:-1,buttons:["box","text","html"]}},props:["selectedButton"],methods:{emitCreate:function(e){e.target.id==this.selectedButton?this.$emit("createWidget",""):this.$emit("createWidget",e.target.id)},mouseDownMove:function(e){this.moving=!0,this.selectLeft=e.layerX,this.selectTop=e.layerY},mouseUpMove:function(){this.moving=!1},mouseMoveMove:function(e){this.moving&&(this.left=e.pageX-this.selectLeft,this.top=e.pageY-this.selectTop,this.$cookies.set("toolbar-left",this.left),this.$cookies.set("toolbar-top",this.top))}}},l=c,d=(i("ca55"),i("2877")),h=Object(d["a"])(l,a,r,!1,null,null,null),g=h.exports,u=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShown,expression:"isShown"}],class:"widget"+(e.editing?" editing":"")+(e.edit_inner?" edit_inner":"")+" "+e.type,style:{left:Math.min(e.x,e.a)+"px",top:Math.min(e.y,e.b)+"px",width:Math.abs(e.a-e.x)+"px",height:Math.abs(e.b-e.y)+"px"},attrs:{draggable:"false"}},[e.editing?i("div",{staticClass:"resize top",style:{top:e.y-6+"px",left:(e.x+e.a)/2-5+"px"},attrs:{draggable:"false"},on:{mousedown:e.mouseDownResize}}):e._e(),e.editing?i("div",{staticClass:"resize bottom",style:{top:e.b-4+"px",left:(e.x+e.a)/2-5+"px"},attrs:{draggable:"false"},on:{mousedown:e.mouseDownResize}}):e._e(),e.editing?i("div",{staticClass:"resize left",style:{left:e.x-4+"px",top:(e.y+e.b)/2-5+"px"},attrs:{draggable:"false"},on:{mousedown:e.mouseDownResize}}):e._e(),e.editing?i("div",{staticClass:"resize right",style:{left:e.a-4+"px",top:(e.y+e.b)/2-5+"px"},attrs:{draggable:"false"},on:{mousedown:e.mouseDownResize}}):e._e(),e.editing?i("div",{staticClass:"delete",style:{left:Math.max(e.x,e.a)-20+"px",top:Math.min(e.y,e.b)-22+"px"},attrs:{draggable:"false"},on:{click:e.deleteWidget}}):e._e(),e.editing?i("div",{staticClass:"move",style:{left:Math.max(e.x,e.a)-42+"px",top:Math.min(e.y,e.b)-22+"px"},attrs:{draggable:"false"},on:{mousedown:e.moveWidget}}):e._e(),e.editing?i("div",{staticClass:"edit",style:{left:Math.max(e.x,e.a)-64+"px",top:Math.min(e.y,e.b)-22+"px"},attrs:{draggable:"false"},on:{click:e.editWidget}}):e._e(),i("div",{class:"contents"+(this.editing?" editing":"")},["iframe"==e.type?i("iframe",{attrs:{src:e.data["src"]}}):e._e(),"html"==e.type?i("div",{staticClass:"html",domProps:{innerHTML:e._s(e.data.script)}}):e._e()]),"html"==e.type&&e.editing?i("HTMLModal",{directives:[{name:"show",rawName:"v-show",value:e.edit_inner,expression:"edit_inner"}],attrs:{html:e.data.script},on:{save:e.editHTML,cancel:function(t){e.edit_inner=!1}}}):e._e()],1)},_=[],p=i("eb8b"),m=p["a"],f=(i("6cab"),Object(d["a"])(m,u,_,!1,null,null,null)),v=f.exports,b={name:"app",components:{Toolbox:g,Widget:v},data:function(){return{needConsent:this.$cookies.isKey("homepage-cookies")?this.$cookies.get("homepage-cookies"):"",editing:!1,creating:"",creating_corner_1:[-1,-1],creating_corner_2:[-1,-1],resizing:-1,resizing_side:-1,moving:-1,moving_diff:[-1,-1],widgets:this.$cookies.isKey("homepage-widgets")?JSON.parse(this.$cookies.get("homepage-widgets")):[],showHTMLModal:!1}},methods:{changeHTML:function(e,t){this.widgets[t].data.script=e},deleteWidget:function(e,t){this.widgets.splice(t,1)},editWidget:function(e,t){this.widgets[t].data=this.createData(this.widgets[t].type)},moveWidget:function(e,t){this.moving=t,this.moving_diff=[e.clientX-(this.widgets[t].box[0]+this.widgets[t].box[2])/2,e.clientY-(this.widgets[t].box[1]+this.widgets[t].box[3])/2]},resizeWidget:function(e,t){this.resizing=t,this.resizing_side=e},createWidget:function(e){this.creating=e},mouseDown:function(e){this.editing&&this.creating&&(this.creating_corner_1=[e.clientX,e.clientY],this.creating_corner_2=[e.clientX,e.clientY])},mouseUp:function(){this.creating_corner_1[0]>=0&&(this.widgets.push({box:[Math.min(this.creating_corner_1[0],this.creating_corner_2[0]),Math.min(this.creating_corner_1[1],this.creating_corner_2[1]),Math.max(this.creating_corner_1[0],this.creating_corner_2[0]),Math.max(this.creating_corner_1[1],this.creating_corner_2[1])],type:this.creating,data:{}}),this.creating="",this.creating_corner_1=[-1,-1],this.creating_corner_2=[-1,-1]),this.resizing>=0&&(this.resizing=-1),this.moving>=0&&(this.moving=-1),this.save()},mouseMove:function(e){if(this.creating_corner_1[0]>=0&&(s["a"].set(this.creating_corner_2,0,e.clientX),s["a"].set(this.creating_corner_2,1,e.clientY)),this.resizing>=0&&s["a"].set(this.widgets[this.resizing].box,this.resizing_side,[e.clientX,e.clientY,e.clientX,e.clientY][this.resizing_side]),this.moving>=0){var t=this.widgets[this.moving].box[0],i=this.widgets[this.moving].box[1],n=this.widgets[this.moving].box[2],o=this.widgets[this.moving].box[3];s["a"].set(this.widgets[this.moving].box,0,e.clientX-this.moving_diff[0]-Math.abs((t-n)/2)),s["a"].set(this.widgets[this.moving].box,1,e.clientY-this.moving_diff[1]-Math.abs((i-o)/2)),s["a"].set(this.widgets[this.moving].box,2,e.clientX-this.moving_diff[0]+Math.abs((t-n)/2)),s["a"].set(this.widgets[this.moving].box,3,e.clientY-this.moving_diff[1]+Math.abs((i-o)/2))}},save:function(){this.$cookies.set("homepage-widgets",JSON.stringify(this.widgets),-1)}}},x=b,w=(i("5c0b"),Object(d["a"])(x,n,o,!1,null,null,null)),M=w.exports,y=i("2b27"),k=i.n(y);s["a"].config.productionTip=!1,s["a"].use(k.a),new s["a"]({render:function(e){return e(M)}}).$mount("#app")},"5c0b":function(e,t,i){"use strict";var s=i("e332"),n=i.n(s);n.a},"6cab":function(e,t,i){"use strict";var s=i("ba23"),n=i.n(s);n.a},"76a4":function(e,t,i){},"888f":function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"edit-modal"},[e._v("\nPaste the html code to be displayed here.  This can include javascript, but keep it between simple script tags.\n        "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.html,expression:"html"}],domProps:{value:e.html},on:{input:function(t){t.target.composing||(e.html=t.target.value)}}}),i("div",{staticClass:"buttons"},[i("button",{on:{click:e.cancel}},[e._v("Cancel")]),i("button",{on:{click:e.save}},[e._v("Save")])])])},n=[],o={name:"HTMLModal",props:["html"],data:function(){return{}},methods:{save:function(){this.$emit("save",this.html)},cancel:function(){this.$emit("cancel")}}},a=o,r=(i("5404"),i("2877")),c=Object(r["a"])(a,s,n,!1,null,null,null);t["a"]=c.exports},ab31:function(e,t,i){},ba23:function(e,t,i){},ca55:function(e,t,i){"use strict";var s=i("ab31"),n=i.n(s);n.a},e332:function(e,t,i){},eb8b:function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("28a5"),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_0__),_HTMLModal__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("888f");__webpack_exports__["a"]={name:"widget",components:{HTMLModal:_HTMLModal__WEBPACK_IMPORTED_MODULE_1__["a"]},props:["x","y","a","b","editing","type","data"],data:function(){return{html_content:"",edit_inner:!1,isShown:!0}},methods:{editHTML:function(e){this.$emit("changeHTML",e),this.edit_inner=!1,this.refreshHTML()},refreshJS:function refreshJS(){if("html"==this.type&&this.data.script)for(var scripts=this.data.script.split("<script>"),i=1;i<scripts.length;i++)eval(scripts[i].split("<\/script>")[0])},mouseDownResize:function(e){switch(e.stopPropagation(),e.target.classList[1]){case"top":this.$emit("resize",1);break;case"bottom":this.$emit("resize",3);break;case"left":this.$emit("resize",0);break;case"right":this.$emit("resize",2);break}},deleteWidget:function(e){e.stopPropagation(),this.$emit("deleteWidget")},moveWidget:function(e){this.$emit("moveWidget",e)},editWidget:function(){this.edit_inner=!0},refreshHTML:function(){"html"==this.type&&this.refreshJS()}},mounted:function(){this.isShown=!1,this.refreshHTML(),this.isShown=!0},watch:{editing:function(){this.refreshHTML()}}}}});
//# sourceMappingURL=app.ac4b6980.js.map
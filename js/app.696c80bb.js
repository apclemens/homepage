(function(t){function e(e){for(var n,a,r=e[0],c=e[1],l=e[2],g=0,h=[];g<r.length;g++)a=r[g],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&h.push(s[a][0]),s[a]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);d&&d(e);while(h.length)h.shift()();return o.push.apply(o,l||[]),i()}function i(){for(var t,e=0;e<o.length;e++){for(var i=o[e],n=!0,r=1;r<i.length;r++){var c=i[r];0!==s[c]&&(n=!1)}n&&(o.splice(e--,1),t=a(a.s=i[0]))}return t}var n={},s={app:0},o=[];function a(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=t,a.c=n,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(i,n,function(e){return t[e]}.bind(null,n));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var d=c;o.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},5404:function(t,e,i){"use strict";var n=i("76a4"),s=i.n(n);s.a},"56d7":function(t,e,i){"use strict";i.r(e);i("cadf"),i("551c"),i("f751"),i("097d");var n=i("2b0e"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("div",{attrs:{id:"canvas"},on:{mousedown:t.mouseDown,mousemove:t.mouseMove,mouseup:t.mouseUp}},[t._l(t.widgets,(function(e,n){return i("Widget",{key:n,attrs:{x:e.box[0],y:e.box[1],a:e.box[2],b:e.box[3],type:e.type,data:e.data,editing:t.editing},on:{resize:function(e){return t.resizeWidget(e,n)},deleteWidget:function(e){return t.deleteWidget(e,n)},editWidget:function(e){return t.editWidget(e,n)},changeHTML:function(e){return t.changeHTML(e,n)},moveWidget:function(e){return t.moveWidget(e,n)}}})})),t.creating_corner_1[0]>-1?i("Widget",{attrs:{x:Math.min(t.creating_corner_1[0],t.creating_corner_2[0]),y:Math.min(t.creating_corner_1[1],t.creating_corner_2[1]),a:Math.max(t.creating_corner_1[0],t.creating_corner_2[0]),b:Math.max(t.creating_corner_1[1],t.creating_corner_2[1]),editing:!0}}):t._e(),i("Toolbox",{directives:[{name:"show",rawName:"v-show",value:t.editing,expression:"editing"}],attrs:{selectedButton:t.creating},on:{createWidget:t.createWidget}})],2),i("label",{attrs:{id:"edit-switch"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.editing,expression:"editing"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.editing)?t._i(t.editing,null)>-1:t.editing},on:{change:function(e){var i=t.editing,n=e.target,s=!!n.checked;if(Array.isArray(i)){var o=null,a=t._i(i,o);n.checked?a<0&&(t.editing=i.concat([o])):a>-1&&(t.editing=i.slice(0,a).concat(i.slice(a+1)))}else t.editing=s}}}),i("span",{staticClass:"slider round"}),t.editing?i("span",{staticClass:"text"},[t._v("Editing")]):i("span",{staticClass:"text"},[t._v("Viewing")])])])},o=[],a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{style:{left:t.left+"px",top:t.top+"px"},attrs:{id:"toolbox"}},[i("div",{class:{moving:t.moving},attrs:{id:"move-bar"},on:{mousedown:t.mouseDownMove,mouseup:t.mouseUpMove,mousemove:t.mouseMoveMove,mouseleave:t.mouseUpMove}}),t._l(t.buttons,(function(e){return i("div",{key:e,class:"widget-selector"+(t.selectedButton==e?" selected":""),style:{backgroundImage:"url("+e+".png)"},attrs:{id:e},on:{click:t.emitCreate}})}))],2)},r=[],c={name:"Toolbox",data:function(){return{moving:!1,left:this.$cookies.isKey("toolbar-left")?this.$cookies.get("toolbar-left"):100,top:this.$cookies.isKey("toolbar-top")?this.$cookies.get("toolbar-top"):100,selectLeft:-1,selectTop:-1,buttons:["box","text","line","html"]}},props:["selectedButton"],methods:{emitCreate:function(t){t.target.id==this.selectedButton?this.$emit("createWidget",""):this.$emit("createWidget",t.target.id)},mouseDownMove:function(t){this.moving=!0,this.selectLeft=t.layerX,this.selectTop=t.layerY},mouseUpMove:function(){this.moving=!1},mouseMoveMove:function(t){this.moving&&(this.left=t.pageX-this.selectLeft,this.top=t.pageY-this.selectTop,this.$cookies.set("toolbar-left",this.left),this.$cookies.set("toolbar-top",this.top))}}},l=c,d=(i("ca55"),i("2877")),g=Object(d["a"])(l,a,r,!1,null,null,null),h=g.exports,u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:"widget"+(t.editing?" editing":"")+(t.edit_inner?" edit_inner":""),style:{left:Math.min(t.x,t.a)+"px",top:Math.min(t.y,t.b)+"px",width:Math.abs(t.a-t.x)+"px",height:Math.abs(t.b-t.y)+"px"},attrs:{draggable:"false"}},[t.editing?i("div",{staticClass:"resize top",style:{top:t.y-6+"px",left:(t.x+t.a)/2-5+"px"},attrs:{draggable:"false"},on:{mousedown:t.mouseDownResize}}):t._e(),t.editing?i("div",{staticClass:"resize bottom",style:{top:t.b-4+"px",left:(t.x+t.a)/2-5+"px"},attrs:{draggable:"false"},on:{mousedown:t.mouseDownResize}}):t._e(),t.editing?i("div",{staticClass:"resize left",style:{left:t.x-4+"px",top:(t.y+t.b)/2-5+"px"},attrs:{draggable:"false"},on:{mousedown:t.mouseDownResize}}):t._e(),t.editing?i("div",{staticClass:"resize right",style:{left:t.a-4+"px",top:(t.y+t.b)/2-5+"px"},attrs:{draggable:"false"},on:{mousedown:t.mouseDownResize}}):t._e(),t.editing?i("div",{staticClass:"delete",style:{left:Math.max(t.x,t.a)-20+"px",top:Math.min(t.y,t.b)-22+"px"},attrs:{draggable:"false"},on:{click:t.deleteWidget}}):t._e(),t.editing?i("div",{staticClass:"move",style:{left:Math.max(t.x,t.a)-42+"px",top:Math.min(t.y,t.b)-22+"px"},attrs:{draggable:"false"},on:{mousedown:t.moveWidget}}):t._e(),t.editing?i("div",{staticClass:"edit",style:{left:Math.max(t.x,t.a)-64+"px",top:Math.min(t.y,t.b)-22+"px"},attrs:{draggable:"false"},on:{click:t.editWidget}}):t._e(),i("div",{class:"contents"+(this.editing?" editing":"")},["iframe"==t.type?i("iframe",{attrs:{src:t.data["src"]}}):t._e(),"html"==t.type?i("div",{staticClass:"html",domProps:{innerHTML:t._s(t.data.script)}}):t._e()]),"html"==t.type&&t.editing?i("HTMLModal",{directives:[{name:"show",rawName:"v-show",value:t.edit_inner,expression:"edit_inner"}],attrs:{html:t.data.script},on:{save:t.editHTML,cancel:function(e){t.edit_inner=!1}}}):t._e()],1)},_=[],p=i("eb8b"),m=p["a"],f=(i("6cab"),Object(d["a"])(m,u,_,!1,null,null,null)),v=f.exports,b={name:"app",components:{Toolbox:h,Widget:v},data:function(){return{editing:!1,creating:"",creating_corner_1:[-1,-1],creating_corner_2:[-1,-1],resizing:-1,resizing_side:-1,moving:-1,moving_diff:[-1,-1],widgets:this.$cookies.isKey("homepage-widgets")?JSON.parse(this.$cookies.get("homepage-widgets")):[],showHTMLModal:!1}},methods:{changeHTML:function(t,e){this.widgets[e].data.script=t},deleteWidget:function(t,e){this.widgets.splice(e,1)},editWidget:function(t,e){this.widgets[e].data=this.createData(this.widgets[e].type)},moveWidget:function(t,e){this.moving=e,this.moving_diff=[t.clientX-(this.widgets[e].box[0]+this.widgets[e].box[2])/2,t.clientY-(this.widgets[e].box[1]+this.widgets[e].box[3])/2]},resizeWidget:function(t,e){this.resizing=e,this.resizing_side=t},createWidget:function(t){this.creating=t},mouseDown:function(t){this.editing&&this.creating&&(this.creating_corner_1=[t.clientX,t.clientY],this.creating_corner_2=[t.clientX,t.clientY])},mouseUp:function(){this.creating_corner_1[0]>=0&&(this.widgets.push({box:[Math.min(this.creating_corner_1[0],this.creating_corner_2[0]),Math.min(this.creating_corner_1[1],this.creating_corner_2[1]),Math.max(this.creating_corner_1[0],this.creating_corner_2[0]),Math.max(this.creating_corner_1[1],this.creating_corner_2[1])],type:this.creating,data:{}}),this.creating="",this.creating_corner_1=[-1,-1],this.creating_corner_2=[-1,-1]),this.resizing>=0&&(this.resizing=-1),this.moving>=0&&(this.moving=-1),this.save()},mouseMove:function(t){if(this.creating_corner_1[0]>=0&&(n["a"].set(this.creating_corner_2,0,t.clientX),n["a"].set(this.creating_corner_2,1,t.clientY)),this.resizing>=0&&n["a"].set(this.widgets[this.resizing].box,this.resizing_side,[t.clientX,t.clientY,t.clientX,t.clientY][this.resizing_side]),this.moving>=0){var e=this.widgets[this.moving].box[0],i=this.widgets[this.moving].box[1],s=this.widgets[this.moving].box[2],o=this.widgets[this.moving].box[3];n["a"].set(this.widgets[this.moving].box,0,t.clientX-this.moving_diff[0]-Math.abs((e-s)/2)),n["a"].set(this.widgets[this.moving].box,1,t.clientY-this.moving_diff[1]-Math.abs((i-o)/2)),n["a"].set(this.widgets[this.moving].box,2,t.clientX-this.moving_diff[0]+Math.abs((e-s)/2)),n["a"].set(this.widgets[this.moving].box,3,t.clientY-this.moving_diff[1]+Math.abs((i-o)/2))}},save:function(){this.$cookies.set("homepage-widgets",JSON.stringify(this.widgets))}}},x=b,w=(i("5c0b"),Object(d["a"])(x,s,o,!1,null,null,null)),M=w.exports,y=i("2b27"),k=i.n(y);n["a"].config.productionTip=!1,n["a"].use(k.a),new n["a"]({render:function(t){return t(M)}}).$mount("#app")},"5c0b":function(t,e,i){"use strict";var n=i("e332"),s=i.n(n);s.a},"6cab":function(t,e,i){"use strict";var n=i("ba23"),s=i.n(n);s.a},"76a4":function(t,e,i){},"888f":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"edit-modal"},[t._v("\n    Paste the html code to be displayed here.  This can include javascript.\n    "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.html,expression:"html"}],domProps:{value:t.html},on:{input:function(e){e.target.composing||(t.html=e.target.value)}}}),i("div",{staticClass:"buttons"},[i("button",{on:{click:t.cancel}},[t._v("Cancel")]),i("button",{on:{click:t.save}},[t._v("Save")])])])},s=[],o={name:"HTMLModal",props:["html"],data:function(){return{}},methods:{save:function(){this.$emit("save",this.html)},cancel:function(){this.$emit("cancel")}}},a=o,r=(i("5404"),i("2877")),c=Object(r["a"])(a,n,s,!1,null,null,null);e["a"]=c.exports},ab31:function(t,e,i){},ba23:function(t,e,i){},ca55:function(t,e,i){"use strict";var n=i("ab31"),s=i.n(n);s.a},e332:function(t,e,i){},eb8b:function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("28a5"),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_0__),_HTMLModal__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("888f");__webpack_exports__["a"]={name:"widget",components:{HTMLModal:_HTMLModal__WEBPACK_IMPORTED_MODULE_1__["a"]},props:["x","y","a","b","editing","type","data"],data:function(){return{html_content:"",edit_inner:!1}},methods:{editHTML:function(t){this.$emit("changeHTML",t),this.edit_inner=!1,this.refreshHTML()},refreshJS:function refreshJS(){if("html"==this.type&&this.data.script)for(var scripts=this.data.script.split("<script>"),i=1;i<scripts.length;i++)eval(scripts[i].split("<\/script>")[0])},mouseDownResize:function(t){switch(t.stopPropagation(),t.target.classList[1]){case"top":this.$emit("resize",1);break;case"bottom":this.$emit("resize",3);break;case"left":this.$emit("resize",0);break;case"right":this.$emit("resize",2);break}},deleteWidget:function(t){t.stopPropagation(),this.$emit("deleteWidget")},moveWidget:function(t){this.$emit("moveWidget",t)},editWidget:function(){this.edit_inner=!0},refreshHTML:function(){"html"==this.type&&this.refreshJS()}},mounted:function(){this.refreshHTML()},watch:{editing:function(){this.refreshHTML()}}}}});
//# sourceMappingURL=app.696c80bb.js.map